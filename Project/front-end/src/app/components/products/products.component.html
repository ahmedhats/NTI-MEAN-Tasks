<div class="products-container">
  <div class="container">
    <div class="products-header">
      <h1>Our Products</h1>
      <p>Discover our curated collection of amazing products</p>
      <!-- ðŸ˜ Admin can add new products -->
      @if(isAdmin){
      <button
        class="btn btn-primary add-product-btn"
        (click)="openAddProductModal()"
      >
      Add New Product
      </button>
      }
    </div>

    @if(isLoading){
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <h3>Loading products...</h3>
      <p>Please wait while we fetch the latest products for you</p>
    </div>
    } @else { @if(isEmpty){
    <h1>no products found!</h1>
    } @else {
    <div class="products-grid">
      <div class="products-list">
        @if(isAdmin){
        @for(product of products; track product._id){
        <div class="product-card">
          <div class="product-image">
            <img [src]="product.image" [alt]="product.description" />
          </div>
          <div class="product-info">
            <h3>{{ product.name }}</h3>
            <p class="product-description">{{ product.description }}</p>
            <div class="product-price">{{ product.price }}$</div>
            <div class="admin-actions">
              <button
                class="btn btn-secondary"
                (click)="openEditProductModal(product)"
              >
                 Update
              </button>
              <button
                class="btn btn-danger"
                (click)="deleteProduct(product)"
              >
                 Delete
              </button>
            </div>
          </div>
        </div>
        } } @else {

        @for(product of products; track product._id){
        <div class="product-card">
          <div class="product-image">
            <img [src]="product.image" [alt]="product.description" />
          </div>
          <div class="product-info">
            <h3>{{ product.name }}</h3>
            <p class="product-description">{{ product.description }}</p>
            <div class="product-price">{{ product.price }}$</div>
            <button class="btn btn-primary">Add to cart</button>
          </div>
        </div>
        } }
      </div>
    </div>
    } }

    <!-- ðŸ˜ Product form modal for adding/editing products -->
    <app-product-form
      [isVisible]="showProductModal"
      [product]="selectedProduct"
      [isEditMode]="isEditMode"
      (closeModal)="closeProductModal()"
    ></app-product-form>
  </div>
</div>
